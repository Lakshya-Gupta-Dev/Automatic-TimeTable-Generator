<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Time Table Generator - Register</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Segoe UI",sans-serif;}
body{background:linear-gradient(135deg,#ff7eb3,#ff758c,#ffce73,#6a82fb,#fc5c7d);background-size:500% 500%;animation:gradientMove 12s infinite alternate;min-height:100vh;display:flex;flex-direction:column;}
@keyframes gradientMove{0%{background-position:left top;}100%{background-position:right bottom;}}
header{background:rgba(0,0,0,0.5);color:white;padding:20px 40px;display:flex;align-items:center;}
.logo{display:flex;align-items:center;gap:12px;}
.logo img{width:55px;height:55px;border-radius:12px;border:2px solid white;background:white;padding:5px;}
h1{font-size:2rem;font-weight:bold;text-shadow:1px 1px 6px rgba(0,0,0,0.5);}
.form-container{flex:1;display:flex;justify-content:center;align-items:center;padding:40px;}
.register-box{background:#fff;padding:35px;border-radius:20px;width:470px;text-align:center;box-shadow:0 12px 30px rgba(0,0,0,0.4);}
.register-box h1{margin:20px 0;color:#fc5c7d;font-size:2.2rem;}
.register-box input{width:100%;padding:12px;margin-bottom:15px;border:1px solid #bbb;border-radius:10px;}
.register-box button{width:100%;padding:14px;background:linear-gradient(90deg,#ff758c,#6a82fb,#fc5c7d);color:white;border:none;border-radius:12px;font-size:1.2rem;font-weight:bold;cursor:pointer;}
.footer{text-align:center;padding:14px;background:rgba(0,0,0,0.6);color:white;width:100%;}
</style>
</head>
<body>
<header>
  <div class="logo">
    <img src="https://img.icons8.com/color/96/calendar--v1.png" alt="calendar logo"/>
    <div>
      <h1>Time Table Generator</h1>
      <p>Organize | Plan | Achieve</p>
    </div>
  </div>
</header>

<div class="form-container">
  <div class="register-box">
    <a href="login1.html">Already Registered? Login here</a>
    <h1>Register</h1>
    <form id="registerForm">
<input type="text" name="username" placeholder="Username" required />
<input type="text" name="instituteName" placeholder="Institute Name" required />
<input type="tel" name="mobile" pattern="[0-9]{10}" maxlength="10" placeholder="10-digit Number" required />
<input type="email" name="email" placeholder="Email" required />
<input type="password" name="password" placeholder="Password" required />
<input type="password" name="confirmPassword" placeholder="Confirm Password" required />

      <button type="submit">Register</button>
    </form>
  </div>
</div>

<div class="footer">
  <p>&copy; 2025 MyWebsite | All Rights Reserved</p>
</div>

<script>
document.getElementById("registerForm").addEventListener("submit", async function(e){
  e.preventDefault();
  const formData = Object.fromEntries(new FormData(this));

  try {
    const res = await fetch("/api/users/register", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(formData)
    });

    // üß† Check if response JSON hai ya plain text
    const contentType = res.headers.get("content-type");
    let data;

    if (contentType && contentType.includes("application/json")) {
      data = await res.json();
    } else {
      data = await res.text();
    }

    if (res.ok) {
      if (data.token) {
        alert("Registration Successful üéâ Token: " + data.token);
      } else {
        alert("Registration Successful üéâ");
      }
      window.location.href = "login1.html";
    } else {
      alert("Registration Failed ‚ùå " + (data.message || data));
    }

  } catch (err) {
    alert("Error: " + err.message);
  }
});
</script>

</body>
</html>
